<%- include('common/view_start', {
  title: 'Advisor',
  cssFiles: ['advisor'],
  navBarLocation: 'advisor'
}) %>

<%- include('common/header', {
  heading: 'Advisor',
  subheading: 'อาจารย์ที่ปรึกษา'
}) %>

<div class="container">

  <div class="row">
    <div class="col-xs-12 col-md-12">
      <h3>ข้อมูลอาจารย์ที่ปรึกษา</h3>
      <p>อ.สมชาย ไม่สมหญิง</p>
    </div>
  </div>

  <hr>

  <div class="row">
    <div class="col-xs-12 col-md-5">
      <table class="table" id="summary_table">
        <h3>สถานะนิสิตทั้งหมด</h3>
        <thead>
          <tr>
            <th>ชั้นปั</th>
            <th>จำนวน</th>
            <th>ติดโปรต่ำ</th>
            <th>ติดโปรสูง</th>
            <th>ไม่เรียนในเทอมนี้</th>
          </tr>
        </thead>
        <tbody class="year_label">
        </tbody>
      </table>
    </div>

    <div class="col-xs-12 col-md-7">
      <ul class="nav nav-tabs" role="tablist" id="myTab">
        <li role="presentation" class="active"><a href="#graph-all" aria-controls="graph-all" role="tab" data-toggle="tab">นิสิตทั้งหมด</a></li>
        <li role="presentation"><a href="#graph-st1" aria-controls="graph-st1" role="tab" data-toggle="tab">ติดโปรต่ำ</a></li>
        <li role="presentation"><a href="#graph-st2" aria-controls="graph-st2" role="tab" data-toggle="tab">ติดโปรสูง</a></li>
        <li role="presentation"><a href="#graph-st3" aria-controls="graph-st3" role="tab" data-toggle="tab">ไม่เรียนในเทอมนี้</a></li>
      </ul>
      <canvas id="nisit-chart"></canvas>
    </div>
  </div>

  <hr>

  <div class="row">
    <div class="col-xs-12">
      <table class="table">
        <h3>นิสิตในความดูแล</h3>
        <thead>
          <tr>
            <th>#</th>
            <th>รหัสนิสิต</th>
            <th>ชื่อ</th>
            <th>Name</th>
            <th>ปี</th>
            <th>ภาค</th>
            <th>สาขา</th>
            <th>GPAX</th>
            <th>คะแนนความประพฤติ</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          <% for (let i = 0; i < data.length; i++) { %>
            <tr>
              <th scope="row">
                <%= i + 1 %>
              </th>
              <td>
                <%= data[i].sid %>
              </td>
              <td>
                <%= data[i].fname_th + ' ' + data[i].lname_th %>
              </td>
              <td>
                <%= data[i].fname_en + ' ' + data[i].lname_en %>
              </td>
              <td>
                <%= new Date().getFullYear() - data[i].ent_year + Math.floor(new Date().getMonth()/12 + 4/12) %>
              </td>
              <td>
                <%= data[i].dname_th %>
              </td>
              <td>
                <%= data[i].name_th %>
              </td>
              <td>
                <%= (Math.pow(Math.random()*9,1/2) + 1).toFixed(2) %>
              </td>
              <td>
                <div class="progress" style="margin-bottom: 1px">
                  <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width:<%= data[i].behav_score %>%">
                  </div>
                </div>
              </td>
              <td>
                <%=data[i].behav_score %>
              </td>
            </tr>
            <% } %>
        </tbody>
      </table>
      <p><b>ทั้งหมด:</b>
        <%= total %> คน</p>
    </div>
  </div>
  <hr>
  <div class="row">
    <div class="col-xs-12">
      <table class="table">
        <h3>นิสิตที่ไม่สามารถมาเรียนได้</h3>
        <thead>
          <tr>
            <th>#</th>
            <th>รหัสนิสิต</th>
            <th>ชื่อ</th>
            <th>ตั้งแต่</th>
            <th>ถึงวันที่</th>
            <th>คำอธิบาย</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <th>1</th>
            <td>5731234521</td>
            <td>เสือเจมส์ โพไซดอน</td>
            <td>12/04/2017</td>
            <td>17/04/2017</td>
            <td>ลาหยุดสงกรานต์</td>
          </tr>
          <tr>
            <th>2</th>
            <td>5735432121</td>
            <td>ผู้ชายคนนี้ กำลังหมดแรง</td>
            <td>21/04/2017</td>
            <td>23/04/2017</td>
            <td>ขี้แตกเพราะแดกชากุหลาบ</td>
          </tr>
        </tbody>
      </table>
      <p><b>ทั้งหมด:</b> 2 คน</p>
    </div>
  </div>
</div>

<%- include('common/view_end', {
  jsFiles: ['advisor']
}) %>
